# Labkit Test Suite

è¿™ä¸ªç›®å½•åŒ…å«äº† labkit åº“çš„å®Œæ•´æµ‹è¯•å¥—ä»¶ï¼Œç”¨äºéªŒè¯å„ä¸ªç»„ä»¶çš„åŠŸèƒ½å’Œæ­£ç¡®æ€§ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
test/
â”œâ”€â”€ Makefile              # æµ‹è¯•ç®¡ç†å·¥å…·
â”œâ”€â”€ README.md             # æœ¬æ–‡ä»¶
â”œâ”€â”€ test_events.py        # äº‹ä»¶æ¨¡å‹æµ‹è¯•
â”œâ”€â”€ test_labkit.py        # å®Œæ•´åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ test_network_config.py # ç½‘ç»œé…ç½®æµ‹è¯•
â”œâ”€â”€ test_validator.py     # YAML éªŒè¯å™¨æµ‹è¯•
â””â”€â”€ labkit_validate.py    # YAML éªŒè¯å‘½ä»¤è¡Œå·¥å…·
```

## ğŸ§ª æµ‹è¯•æ–‡ä»¶è¯´æ˜

### 1. `test_events.py` - äº‹ä»¶æ¨¡å‹æµ‹è¯•
**ç”¨é€”**: éªŒè¯äº‹ä»¶ç³»ç»Ÿæ¨¡å‹çš„åŠŸèƒ½
**æµ‹è¯•å†…å®¹**:
- EventType æšä¸¾å€¼éªŒè¯
- NodeExecArgs å‚æ•°éªŒè¯
- LinkProperties å±æ€§éªŒè¯
- InterfaceCreateArgs æ¥å£åˆ›å»ºå‚æ•°éªŒè¯
- Event äº‹ä»¶å¯¹è±¡åˆ›å»ºå’ŒéªŒè¯

**è¿è¡Œæ–¹å¼**:
```bash
make test-events
# æˆ–
python3 test_events.py
```

### 2. `test_labkit.py` - å®Œæ•´åŠŸèƒ½æµ‹è¯•
**ç”¨é€”**: éªŒè¯ labkit SDK çš„å®Œæ•´åŠŸèƒ½
**æµ‹è¯•å†…å®¹**:
- åŸºç¡€æ¨¡å‹åˆ›å»ºå’ŒéªŒè¯
- å‰§æœ¬æ¨¡å‹ç³»ç»Ÿ
- æ—¶é—´è¡¨è¾¾å¼éªŒè¯
- å®Œæ•´å®éªŒåˆ›å»º

**è¿è¡Œæ–¹å¼**:
```bash
make test-labkit
# æˆ–
python3 test_labkit.py
```

### 3. `test_network_config.py` - ç½‘ç»œé…ç½®æµ‹è¯•
**ç”¨é€”**: éªŒè¯ç½‘ç»œé…ç½®æ¨¡å‹å’Œ YAML ç”Ÿæˆ
**æµ‹è¯•å†…å®¹**:
- NetworkConfig æ¨¡å‹åˆ›å»º
- YAML åºåˆ—åŒ–å’Œååºåˆ—åŒ–
- å­—æ®µé¡ºåºå›ºå®š
- å¤æ‚ç½‘ç»œæ‹“æ‰‘é…ç½®

**è¿è¡Œæ–¹å¼**:
```bash
make test-network
# æˆ–
python3 test_network_config.py
```

### 4. `test_validator.py` - éªŒè¯å™¨æµ‹è¯•
**ç”¨é€”**: éªŒè¯ YAML æ–‡ä»¶éªŒè¯å™¨åŠŸèƒ½
**æµ‹è¯•å†…å®¹**:
- æœ‰æ•ˆæ–‡ä»¶éªŒè¯
- æ— æ•ˆæ–‡ä»¶é”™è¯¯æ£€æµ‹
- è¯¦ç»†é”™è¯¯æŠ¥å‘Š
- å®éªŒç›®å½•éªŒè¯

**è¿è¡Œæ–¹å¼**:
```bash
make test-validator
# æˆ–
python3 test_validator.py
```

### 5. `labkit_validate.py` - YAML éªŒè¯å·¥å…·
**ç”¨é€”**: å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºéªŒè¯ YAML æ–‡ä»¶
**åŠŸèƒ½**:
- å•æ–‡ä»¶éªŒè¯
- å®éªŒç›®å½•éªŒè¯
- è‡ªåŠ¨ç±»å‹æ£€æµ‹
- è¯¦ç»†é”™è¯¯æŠ¥å‘Š

**ä½¿ç”¨æ–¹å¼**:
```bash
# éªŒè¯å•ä¸ªæ–‡ä»¶
python3 labkit_validate.py network_config.yaml

# éªŒè¯å®éªŒç›®å½•
python3 labkit_validate.py --experiment ./my_experiment

# æ˜¾ç¤ºè¯¦ç»†é”™è¯¯
python3 labkit_validate.py --verbose invalid_file.yaml
```

## ğŸ› ï¸ Makefile å‘½ä»¤

### æµ‹è¯•å‘½ä»¤
```bash
make all              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test-models      # æµ‹è¯•åŸºç¡€æ¨¡å‹
make test-events      # æµ‹è¯•äº‹ä»¶æ¨¡å‹
make test-network     # æµ‹è¯•ç½‘ç»œé…ç½®
make test-validator   # æµ‹è¯•éªŒè¯å™¨
make test-labkit      # æµ‹è¯•å®Œæ•´åŠŸèƒ½
```

### å·¥å…·å‘½ä»¤
```bash
make validate-file FILE=path/to/file.yaml  # éªŒè¯å•ä¸ªæ–‡ä»¶
make validate-dir DIR=path/to/experiment   # éªŒè¯å®éªŒç›®å½•
```

### æ¸…ç†å‘½ä»¤
```bash
make clean            # æ¸…ç†æ‰€æœ‰æµ‹è¯•æ–‡ä»¶
make clean-test-files # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

### ä¿¡æ¯å‘½ä»¤
```bash
make help             # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
make status           # æ˜¾ç¤ºæµ‹è¯•çŠ¶æ€
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
cd test
make all
```

### 2. è¿è¡Œç‰¹å®šæµ‹è¯•
```bash
cd test
make test-network     # åªæµ‹è¯•ç½‘ç»œé…ç½®
```

### 3. éªŒè¯ YAML æ–‡ä»¶
```bash
cd test
make validate-file FILE=../network_config_ordered.yaml
```

### 4. éªŒè¯å®éªŒç›®å½•
```bash
cd test
make validate-dir DIR=../test_experiment
```

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

- âœ… **æ¨¡å‹éªŒè¯**: Pydantic æ¨¡å‹åˆ›å»ºã€å­—æ®µéªŒè¯ã€ç±»å‹æ£€æŸ¥
- âœ… **äº‹ä»¶ç³»ç»Ÿ**: äº‹ä»¶ç±»å‹ã€æ‰§è¡Œå‚æ•°ã€å±æ€§è®¾ç½®
- âœ… **ç½‘ç»œé…ç½®**: æ‹“æ‰‘å®šä¹‰ã€èŠ‚ç‚¹é…ç½®ã€é“¾è·¯è®¾ç½®
- âœ… **YAML å¤„ç†**: åºåˆ—åŒ–ã€ååºåˆ—åŒ–ã€å­—æ®µæ’åº
- âœ… **éªŒè¯å™¨**: æ–‡ä»¶éªŒè¯ã€é”™è¯¯æŠ¥å‘Šã€ç›®å½•éªŒè¯
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´åŠŸèƒ½æµç¨‹æµ‹è¯•

## ğŸ”§ å¼€å‘è¯´æ˜

### æ·»åŠ æ–°æµ‹è¯•
1. åœ¨ `test/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶
2. åœ¨ `Makefile` ä¸­æ·»åŠ å¯¹åº”çš„æµ‹è¯•ç›®æ ‡
3. æ›´æ–° `README.md` æ–‡æ¡£

### æµ‹è¯•æœ€ä½³å®è·µ
- æ¯ä¸ªæµ‹è¯•æ–‡ä»¶ä¸“æ³¨äºä¸€ä¸ªåŠŸèƒ½æ¨¡å—
- åŒ…å«æœ‰æ•ˆå’Œæ— æ•ˆæ•°æ®çš„æµ‹è¯•ç”¨ä¾‹
- æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯å’Œè°ƒè¯•ä¿¡æ¯
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•å‡½æ•°åç§°

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- ä¾èµ–åŒ…å·²å®‰è£… (`pip install -r requirements.txt`)

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **å¯¼å…¥é”™è¯¯**: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œæµ‹è¯•
2. **ä¾èµ–ç¼ºå¤±**: è¿è¡Œ `pip install -r requirements.txt`
3. **æƒé™é—®é¢˜**: ç¡®ä¿æœ‰æ–‡ä»¶è¯»å†™æƒé™

### è°ƒè¯•æŠ€å·§
- ä½¿ç”¨ `--verbose` å‚æ•°è·å–è¯¦ç»†è¾“å‡º
- æ£€æŸ¥ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶
- æŸ¥çœ‹é”™è¯¯æŠ¥å‘Šä¸­çš„å­—æ®µè·¯å¾„

## ğŸ“ æ›´æ–°æ—¥å¿—

- **v1.0.0**: åˆå§‹æµ‹è¯•å¥—ä»¶
  - åŸºç¡€æ¨¡å‹æµ‹è¯•
  - äº‹ä»¶ç³»ç»Ÿæµ‹è¯•
  - ç½‘ç»œé…ç½®æµ‹è¯•
  - YAML éªŒè¯å™¨æµ‹è¯•
  - å‘½ä»¤è¡Œå·¥å…· 